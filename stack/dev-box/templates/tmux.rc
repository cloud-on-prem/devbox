set -g update-environment "DISPLAY SSH_ASKPASS SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY"
set-environment -gru 'SSH_AUTH_SOCK' ~/.ssh/ssh_auth_sock

set -sg escape-time 0
set -g mode-mouse on
set -g mouse-resize-pane on
set -g mouse-select-pane on
set -g mouse-select-window on
set -g default-terminal "screen-256color"
set -g history-limit 50000
set -g focus-events on

# Use vim keybindings in copy mode
setw -g mode-keys vi
bind p paste-buffer

# in copy mode
bind -t vi-copy v begin-selection # `v` begins a selection. (movement keys to select the desired bits)
bind -t vi-copy y copy-selection # `y` copies the current selection to one of tmux's "paste buffers"
bind -t vi-copy V rectangle-toggle # `V` changes between line- and columnwise selection
bind -t vi-copy Y copy-end-of-line

# reload config without killing server
bind R source-file ~/.tmux.conf \; display-message "  Config reloaded..."

# Change the mapping to C-a
set -g prefix C-a
unbind C-b

# Ensure that we can send Ctrl-A to other apps
bind C-a send-prefix

# Status bar
set-option -g status-justify centre
set -g status on
set -g status-utf8 on
set -g status-interval 10

set -g @colors-solarized '256'

set-option -g @batt_charged_icon ""
set-option -g @batt_charging_icon ""
set-option -g @batt_discharging_icon ""
set-option -g @batt_attached_icon ""
set-option -g @cpu_icon " "
set -g @online_icon "#[fg=color31]"
set -g @offline_icon "#[fg=color31]"

set -g status-left-length 20
set -g status-left '#{?client_prefix,#[fg=colour254]#[bg=colour234]#[bold],#[fg=colour16]#[bg=colour254]#[bold]} #S \
                    #{?client_prefix,#[fg=colour31]#[bg=colour234]#[nobold],#[fg=colour254]#[bg=colour234]#[nobold]}'

set -g status-right-length 200
set -g status-right "#[fg=colour234,bg=colour254]#[fg=colour234,bg=colour254]#{battery_icon} \
                     #{battery_percentage}  #{cpu_icon}#{cpu_percentage}  #{online_status} \
                     #[fg-color=0]  %a %h-%d %H:%M #[fg=colour254,bg=colour234,nobold]"

set -g window-status-format "#[fg=color244,bg=color235] #I #W "
set -g window-status-current-format "#[fg=colour100,bg=color136] #I #W "

# List of plugins
set -g @tpm_plugins " \
  tmux-plugins/tpm \
  tmux-plugins/tmux-battery \
  tmux-plugins/tmux-pain-control \
  tmux-plugins/tmux-yank \
  tmux-plugins/tmux-copycat \
  tmux-plugins/tmux-cpu \
  tmux-plugins/tmux-online-status \
  seebi/tmux-colors-solarized \
"

run-shell '~/.tmux/plugins/tpm/tpm'
